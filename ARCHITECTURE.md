# Architecture

> Generated by /map on 2026-02-23

## Overview
SolutionBank Frontend is a monorepo containing both a React Native (Expo) mobile application and a Next.js web application. The codebase is organized using Yarn workspaces and Turbo, separating cross-platform features and UI components into shared packages. It covers distinct user flows for "Guest", "Homeowner", and "Handyman".

## System Diagram
```ascii
    +-------------+      +-------------+
    |  apps/expo  |      |  apps/next  |
    | (Mobile App)|      |  (Web App)  |
    +-------------+      +-------------+
           |                    |
           v                    v
    +----------------------------------+
    |           packages/app           |
    |     (Cross-platform features)    |
    +----------------------------------+
           |                    |
           v                    v
    +-------------+      +-------------+
    |packages/api |      | packages/ui |
    | (Data/Hooks)|      | (Components)|
    +-------------+      +-------------+
           |                    |
           v                    v
    +----------------------------------+
    |         packages/config          |
    |         (Tamagui setup)          |
    +----------------------------------+
```

## Components

### `apps/expo`
- **Purpose:** React Native iOS/Android application entry point using Expo Router.
- **Location:** `apps/expo`
- **Dependencies:** `@my/ui`, `app` (packages/app), `expo`, `react-native`, `tamagui`.

### `apps/next`
- **Purpose:** Next.js web application entry point.
- **Location:** `apps/next`
- **Dependencies:** `app` (packages/app), `@tamagui/config`, `next`, `react-native-web`.

### `packages/app`
- **Purpose:** Core application features, screens, and navigation logic. Utilizes Solito for sharing navigation between Expo and Next.js.
- **Location:** `packages/app`
- **Dependencies:** `@my/api`, `@my/ui`, `solito`, `expo-router`.
- **Dependents:** `apps/expo`, `apps/next`.

### `packages/api`
- **Purpose:** Data fetching hooks, API clients, and TypeScript type definitions for the various actors (auth, guest, homeowner, handyman, chat). Uses React Query and Zustand.
- **Location:** `packages/api`
- **Dependencies:** `@tanstack/react-query`, `ky`, `zustand`.
- **Dependents:** `packages/app`, `packages/ui`.

### `packages/ui`
- **Purpose:** Shared Tamagui UI components and design system.
- **Location:** `packages/ui`
- **Dependencies:** `@my/api`, `@my/config`, `tamagui`.
- **Dependents:** `apps/expo`, `apps/next`, `packages/app`.

## Data Flow
1. **UI Layer**: Users interact with Tamagui components in `packages/ui` or screens in `packages/app`.
2. **State & Fetching**: Actions trigger React Query mutations or Zustand state updates defined in `packages/api`.
3. **Network**: API requests are executed using the `ky` HTTP client against backend services.

## Integration Points
| External Service | Type | Purpose |
|------------------|------|---------|
| Backend API | REST API | Core business logic, db operations via `ky` client. |
| React Navigation / Solito | Navigation | Cross-platform routing (Next + Expo Router). |
| Tamagui | UI System | Design token sharing, styling, animations. |

## Conventions
- **Naming:** Kebab-case for file names (e.g., `ongoing-dashboard.tsx`, `apply-form-screen.tsx`).
- **Structure:** Feature-based routing (e.g., `features/guest/home`, `features/handyman/jobs`).
- **State Management:** Local UI state handled by React. Server state handled by React Query. App-wide global state via Zustand.

## Technical Debt
- [ ] TODO/FIXME found in `packages/app/features/guest/home/screen.tsx`
- [ ] TODO/FIXME found in `packages/app/features/handyman/jobs/ongoing-dashboard.tsx`
- [ ] Debug logs remaining in UI package (`DocumentThumbnail.tsx`, `AttachmentPicker.tsx`)
- [ ] Debug logs remaining in App features (`homeowner/jobs/add/screen.tsx`, `homeowner/jobs/edit/screen.tsx`, `handyman/jobs/apply-form-screen.tsx`, etc)
- [ ] Debug logs remaining in Chat components (`common/chat-screen.tsx`, `common/general-chat-screen.tsx`)
